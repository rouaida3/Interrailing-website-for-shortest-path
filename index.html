<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Interrail Fastest Route â€” Travel-Day Aware Planner</title>
<style>
:root {
  --accent: #0b6efd;
  --muted: #6b7280;
  --bg: #f7fafc;
  --card: #ffffff;
}

/* GENERAL */
html, body {
    height: 100%;
    margin: 0;
    font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, 'Helvetica Neue', Arial;
    background: url('images/background.jpg') no-repeat center center fixed;
    background-size: cover; /* makes the image cover the whole screen */
    color: #0f172a;
  }
  

  /* Optional: make your container slightly transparent for readability */
  .container {
    max-width: 1200px;
    margin: 28px auto;
    padding: 20px;
    background: rgba(255, 255, 255, 0.85); /* semi-transparent white */
    border-radius: 12px;
  }

/* HEADER */
header { display: flex; align-items: center; gap: 16px; }
h1 { margin: 0; font-size: 1.5rem; }
p.lead { margin: 8px 0 20px; color: var(--muted); }

/* LAYOUT */
.grid { display: block; }
.map { width: 100%; height: 520px; border-radius: 12px; background: linear-gradient(180deg,#eef2ff,#fff); padding: 20px; overflow-y: scroll; }
.card { background: var(--card); border-radius: 12px; padding: 18px; box-shadow: 0 6px 18px rgba(11,27,45,0.06); margin-bottom: 22px; }

/* INPUTS */
label { display: block; font-weight: 600; margin-top: 14px; }
input[type=text], input[type=number], select, textarea {
  width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #e6eef6; margin-top: 6px;
}

/* BUTTONS */
button {
  background: var(--accent); color: white; border: none; padding: 10px 14px; border-radius: 10px; font-weight: 700; cursor: pointer; margin-top: 12px;
}
button.ghost { background: transparent; color: var(--accent); border: 1px solid #e6eef6; }
button[disabled] { opacity: 0.5; cursor: default; }

/* ROUTE STEPS */
.route-step {
  display: flex; gap: 10px; align-items: center; padding: 8px; border-radius: 8px; background: #f1f5f9; margin-bottom: 8px;
}
.meta { color: var(--muted); font-size: 0.95rem; }

/* FOOTER */
.footer { margin-top: 18px; color: var(--muted); font-size: 0.9rem; }

pre { background: #0f172a; color: #fff; padding: 12px; border-radius: 8px; overflow: auto; }

/* MOBILE */
@media (max-width: 980px) { .map { height: 300px; } }
/* ==================== COUNTRY INFO SECTION ==================== */
.journey-info-container {
  max-width: 1200px;
  margin: 40px auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.journey-header {
  margin-bottom: 30px;
  text-align: center;
}

.journey-header h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 1.5rem;
}

.journey-controls {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.journey-controls input {
  padding: 10px 15px;
  border: 2px solid #e6eef6;
  border-radius: 8px;
  font-size: 14px;
  min-width: 180px;
  background: white;
}

.journey-controls input:focus {
  border-color: #0b6efd;
  outline: none;
}

.journey-controls button {
  padding: 10px 20px;
  background: #0b6efd;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  font-weight: 600;
}

.journey-controls button:hover {
  background: #095cd8;
}

.journey-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 20px;
  margin: 30px 0;
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.stat {
  text-align: center;
  padding: 15px;
}

.stat-value {
  display: block;
  font-size: 2rem;
  font-weight: bold;
  color: #2c3e50;
  margin-bottom: 5px;
}

.stat-label {
  font-size: 14px;
  color: #6b7280;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Country Cards */
.country-cards-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 25px;
  margin-top: 30px;
}

.placeholder-card {
  grid-column: 1 / -1;
  text-align: center;
  padding: 40px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.placeholder-card h3 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.placeholder-card p {
  color: #6b7280;
  font-size: 14px;
}

.country-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border: 1px solid #e6eef6;
}

.country-image {
  height: 180px;
  width: 100%;
  object-fit: cover;
}

.country-info {
  padding: 20px;
}

.country-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.country-name {
  font-size: 1.2rem;
  font-weight: bold;
  color: #2c3e50;
}

.country-flag {
  font-size: 1.5rem;
}

.country-capital {
  color: #0b6efd;
  font-weight: 500;
  margin-bottom: 10px;
  font-size: 14px;
}

.country-description {
  color: #5d6d7e;
  line-height: 1.5;
  margin-bottom: 15px;
  font-size: 14px;
}

.country-facts {
  background: #f7fafc;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 15px;
  border: 1px solid #e6eef6;
}

.fact {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid #e6eef6;
  font-size: 13px;
}

.fact:last-child {
  border-bottom: none;
}

.fact-label {
  color: #6b7280;
}

.fact-value {
  color: #2c3e50;
  font-weight: 500;
}

.train-info {
  background: #e8f4fc;
  padding: 12px;
  border-radius: 8px;
  border-left: 4px solid #0b6efd;
}

.train-route {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.route-cities {
  font-weight: 500;
  color: #2c3e50;
  font-size: 14px;
}

.train-time {
  color: #6b7280;
  font-size: 13px;
}
@media (max-width: 768px) {
  .journey-controls {
    flex-direction: column;
  }
  
  .journey-controls input,
  .journey-controls button {
    width: 100%;
  }
  
  .country-cards-container {
    grid-template-columns: 1fr;
  }
  
  .journey-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>
</head>
<body>
<div class="container">
<header>
  <div style="width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#0b6efd,#60a5fa);display:flex;align-items:center;justify-content:center;">
    <img src="images/ikon.png" alt="IR Icon" style="width:32px;height:32px;">
  </div>
  <div>
    <h1>Interrail Fastest Route â€” Travel-Day Aware Planner</h1>
    <p class="lead">Optimizes fastest itineraries while respecting <strong>travel-day</strong> limits (e.g. 5 days in 1 month). Unlimited trains per travel day â€” days count when you board your first train that calendar day.</p>
  </div>
</header>

<div class="grid" style="margin-top:18px">
  <main class="card">
    <div class="top-controls">
      <div style="flex:1;min-width:220px">
        <label for="start">Start station</label>
        <input id="start" type="text" list="stations" placeholder="e.g. Paris" />
      </div>
      <div style="flex:1;min-width:220px">
        <label for="end">Destination station</label>
        <input id="end" type="text" list="stations" placeholder="e.g. Rome" />
      </div>
      <div style="width:140px">
        <label for="maxDays">Max travel days</label>
        <input id="maxDays" type="number" min="1" max="30" value="5" />
      </div>
    </div>

    <div style="margin-top:12px;display:flex;gap:8px">
      <button id="searchBtn">Find fastest valid route</button>
      <button id="exampleBtn" class="ghost">Load example trip</button>
    </div>

    <div class="result" id="result"></div>

    <section style="margin-top:12px">
      <h4 style="margin-bottom:8px">How the constraint works</h4>
      <p class="meta">A travel day counts when you take your first train on a calendar day. Unlimited rides in that day are allowed. If a journey departs on a later calendar date than the previous arrival, it consumes another travel day. Night trains are counted by departure date.</p>
    </section>
  </main>

  <aside class="card">
    <h3 style="margin-top:0">Network Map (demo)</h3>
    <div class="map" id="mapArea"></div>
    <datalist id="stations"></datalist>

    <section style="margin-top:12px">
      <h4 style="margin-bottom:8px">Route details</h4>
      <div id="routeDetails" class="meta">No route yet.</div>
    </section>
  </aside>
<div class="journey-info-container">
  <div class="journey-header">
    <h2>Countries Along Your Journey</h2>
    <div class="journey-controls">
      <input type="text" id="journey-start" placeholder="From: London" value="Paris">
      <input type="text" id="journey-end" placeholder="To: Istanbul" value="Barcelona">
      <button id="show-countries">Show Countries on Route</button>
    </div>
  </div>
  
  <div class="journey-stats">
    <div class="stat">
      <span class="stat-value" id="countries-count">-</span>
      <span class="stat-label">Countries</span>
    </div>
    <div class="stat">
      <span class="stat-value" id="route-distance">-</span>
      <span class="stat-label">Distance</span>
    </div>
    
    <div class="stat">
      <span class="stat-value" id="travel-hours">-</span>
      <span class="stat-label">Travel Hours</span>
    </div>
  </div>
  
  <div class="country-cards-container" id="country-cards">
    <!-- Country cards will be inserted here -->
    <div class="placeholder-card">
      <h3>Plan a journey to see country information</h3>
      <p>Enter starting and destination cities above to view photos and information about each country along your route.</p>
    </div>
  </div>
</div>
</div>
</div>

<script>
// -----------------------------
// Demo schedule
// -----------------------------

let connections = [
  // ==================== UK & IRELAND ====================
  { "from": "London", "to": "Paris", "dep": "07:30", "arr": "10:50", "type": "Eurostar" },
  { "from": "London", "to": "Edinburgh", "dep": "08:00", "arr": "12:15", "type": "High-speed" },
  { "from": "London", "to": "Dublin", "dep": "08:30", "arr": "12:45", "type": "Ferry/Train" },
  { "from": "London", "to": "Brussels", "dep": "07:00", "arr": "09:25", "type": "Eurostar" },
  
  // ==================== FRANCE & BENELUX ====================
  { "from": "Paris", "to": "Brussels", "dep": "08:00", "arr": "09:25", "type": "TGV/Thalys" },
  { "from": "Paris", "to": "Lyon", "dep": "09:00", "arr": "10:45", "type": "TGV" },
  { "from": "Paris", "to": "Frankfurt", "dep": "10:00", "arr": "12:30", "type": "ICE/TGV" },
  { "from": "Paris", "to": "Madrid", "dep": "19:00", "arr": "08:30", "type": "Night train" },
  { "from": "Paris", "to": "Vienna", "dep": "19:00", "arr": "08:30", "type": "Nightjet" },
  { "from": "Paris", "to": "Berlin", "dep": "08:00", "arr": "14:30", "type": "ICE/TGV" },
  
  { "from": "Brussels", "to": "Amsterdam", "dep": "08:30", "arr": "09:55", "type": "Thalys" },
  { "from": "Brussels", "to": "Luxembourg", "dep": "11:00", "arr": "13:00", "type": "Intercity" },
  { "from": "Brussels", "to": "Cologne", "dep": "10:00", "arr": "11:40", "type": "ICE" },
  
  { "from": "Amsterdam", "to": "Berlin", "dep": "09:00", "arr": "12:30", "type": "ICE" },
  { "from": "Amsterdam", "to": "Cologne", "dep": "08:00", "arr": "10:05", "type": "ICE" },
  
  { "from": "Lyon", "to": "Geneva", "dep": "08:30", "arr": "10:00", "type": "TER/TGV" },
  { "from": "Lyon", "to": "Marseille", "dep": "09:00", "arr": "10:45", "type": "TGV" },
  { "from": "Lyon", "to": "Milan", "dep": "10:30", "arr": "13:45", "type": "TGV/Frecciarossa" },
  { "from": "Lyon", "to": "Zurich", "dep": "11:00", "arr": "13:30", "type": "TGV Lyria" },
  { "from": "Lyon", "to": "Barcelona", "dep": "08:00", "arr": "11:45", "type": "TGV" },
  
  { "from": "Marseille", "to": "Barcelona", "dep": "10:30", "arr": "14:15", "type": "TGV" },
  { "from": "Marseille", "to": "Milan", "dep": "11:00", "arr": "15:30", "type": "Thello" },
  
  { "from": "Luxembourg", "to": "Paris", "dep": "09:00", "arr": "11:30", "type": "TGV" },
  { "from": "Luxembourg", "to": "Frankfurt", "dep": "10:00", "arr": "12:00", "type": "ICE" },
  
  // ==================== GERMANY ====================
  { "from": "Frankfurt", "to": "Cologne", "dep": "08:00", "arr": "09:20", "type": "ICE" },
  { "from": "Frankfurt", "to": "Munich", "dep": "09:00", "arr": "11:50", "type": "ICE" },
  { "from": "Frankfurt", "to": "Berlin", "dep": "10:00", "arr": "13:00", "type": "ICE" },
  { "from": "Frankfurt", "to": "Prague", "dep": "12:00", "arr": "16:30", "type": "EC" },
  
  { "from": "Berlin", "to": "Warsaw", "dep": "08:00", "arr": "11:45", "type": "EC" },
  { "from": "Berlin", "to": "Prague", "dep": "09:00", "arr": "12:45", "type": "EC" },
  { "from": "Berlin", "to": "Hamburg", "dep": "10:00", "arr": "11:45", "type": "ICE" },
  { "from": "Berlin", "to": "Copenhagen", "dep": "12:00", "arr": "16:45", "type": "EC" },
  { "from": "Berlin", "to": "Budapest", "dep": "08:00", "arr": "17:30", "type": "EC" },
  
  { "from": "Munich", "to": "Vienna", "dep": "08:00", "arr": "11:20", "type": "Railjet" },
  { "from": "Munich", "to": "Zurich", "dep": "09:00", "arr": "11:40", "type": "EC" },
  { "from": "Munich", "to": "Prague", "dep": "10:00", "arr": "14:15", "type": "EC" },
  { "from": "Munich", "to": "Salzburg", "dep": "11:00", "arr": "12:10", "type": "Railjet" },
  { "from": "Munich", "to": "Milan", "dep": "12:00", "arr": "16:30", "type": "EC" },
  { "from": "Munich", "to": "Venice", "dep": "08:00", "arr": "12:30", "type": "EC" },
  { "from": "Munich", "to": "Rome", "dep": "07:00", "arr": "14:30", "type": "EC" },
  { "from": "Munich", "to": "Zagreb", "dep": "09:00", "arr": "15:30", "type": "EC" },
  
  { "from": "Hamburg", "to": "Copenhagen", "dep": "08:00", "arr": "10:45", "type": "ICE/EC" },
  { "from": "Hamburg", "to": "Berlin", "dep": "09:00", "arr": "10:45", "type": "ICE" },
  
  // ==================== SWITZERLAND ====================
  { "from": "Zurich", "to": "Milan", "dep": "08:00", "arr": "10:40", "type": "EC" },
  { "from": "Zurich", "to": "Geneva", "dep": "09:00", "arr": "11:30", "type": "IC" },
  { "from": "Zurich", "to": "Munich", "dep": "10:00", "arr": "12:40", "type": "EC" },
  { "from": "Zurich", "to": "Vienna", "dep": "11:00", "arr": "16:30", "type": "Nightjet" },
  { "from": "Zurich", "to": "Budapest", "dep": "08:00", "arr": "16:30", "type": "Railjet/EC" },
  { "from": "Zurich", "to": "Prague", "dep": "09:00", "arr": "16:00", "type": "EC" },
  
  { "from": "Geneva", "to": "Lyon", "dep": "08:30", "arr": "10:00", "type": "TER/TGV" },
  
  // ==================== AUSTRIA ====================
  { "from": "Vienna", "to": "Bratislava", "dep": "08:00", "arr": "08:40", "type": "Regional" },
  { "from": "Vienna", "to": "Budapest", "dep": "09:00", "arr": "11:20", "type": "Railjet" },
  { "from": "Vienna", "to": "Prague", "dep": "10:00", "arr": "13:30", "type": "Railjet" },
  { "from": "Vienna", "to": "Venice", "dep": "12:00", "arr": "16:45", "type": "Railjet" },
  { "from": "Vienna", "to": "Warsaw", "dep": "19:00", "arr": "06:30", "type": "Nightjet" },
  { "from": "Vienna", "to": "Zagreb", "dep": "08:00", "arr": "11:30", "type": "Railjet" },
  { "from": "Vienna", "to": "Ljubljana", "dep": "09:00", "arr": "12:30", "type": "EC" },
  { "from": "Vienna", "to": "Salzburg", "dep": "09:00", "arr": "11:30", "type": "Railjet" },
  
  { "from": "Salzburg", "to": "Munich", "dep": "08:00", "arr": "09:10", "type": "Railjet/Regional" },
  { "from": "Salzburg", "to": "Venice", "dep": "10:00", "arr": "15:45", "type": "Railjet/EC" },
  { "from": "Salzburg", "to": "Zurich", "dep": "11:00", "arr": "15:30", "type": "EC" },
  
  // ==================== ITALY ====================
  { "from": "Milan", "to": "Rome", "dep": "08:00", "arr": "10:50", "type": "Frecciarossa" },
  { "from": "Milan", "to": "Venice", "dep": "09:00", "arr": "11:10", "type": "Frecciarossa" },
  { "from": "Milan", "to": "Paris", "dep": "07:00", "arr": "13:30", "type": "TGV/Frecciarossa" },
  { "from": "Milan", "to": "Lyon", "dep": "12:00", "arr": "15:45", "type": "TGV/Frecciarossa" },
  
  { "from": "Rome", "to": "Naples", "dep": "08:30", "arr": "09:50", "type": "Frecciarossa" },
  { "from": "Rome", "to": "Milan", "dep": "10:30", "arr": "13:20", "type": "Frecciarossa" },
  { "from": "Rome", "to": "Venice", "dep": "11:30", "arr": "15:00", "type": "Frecciarossa" },
  
  { "from": "Venice", "to": "Ljubljana", "dep": "08:00", "arr": "11:45", "type": "EC" },
  { "from": "Venice", "to": "Zagreb", "dep": "09:00", "arr": "14:45", "type": "EC" },
  
  // ==================== CZECH REPUBLIC & SLOVAKIA ====================
  { "from": "Prague", "to": "Vienna", "dep": "08:00", "arr": "11:30", "type": "Railjet" },
  { "from": "Prague", "to": "Berlin", "dep": "09:00", "arr": "12:45", "type": "EC" },
  { "from": "Prague", "to": "Munich", "dep": "10:00", "arr": "14:15", "type": "EC" },
  { "from": "Prague", "to": "Warsaw", "dep": "11:00", "arr": "16:30", "type": "EC" },
  { "from": "Prague", "to": "Budapest", "dep": "12:00", "arr": "17:45", "type": "EC" },
  
  { "from": "Bratislava", "to": "Vienna", "dep": "08:30", "arr": "09:10", "type": "Regional" },
  { "from": "Bratislava", "to": "Budapest", "dep": "10:00", "arr": "11:10", "type": "Regional" },
  
  // ==================== HUNGARY ====================
  { "from": "Budapest", "to": "Zagreb", "dep": "10:00", "arr": "13:30", "type": "IC" },
  { "from": "Budapest", "to": "Belgrade", "dep": "11:00", "arr": "16:30", "type": "IC" },
  { "from": "Budapest", "to": "Bucharest", "dep": "19:00", "arr": "09:00", "type": "Night train" },
  { "from": "Budapest", "to": "Belgrade", "dep": "08:00", "arr": "13:30", "type": "IC" },
  { "from": "Paris", "to": "Budapest", "dep": "19:00", "arr": "10:30", "type": "Nightjet" },
  
  // ==================== SLOVENIA & CROATIA ====================
  { "from": "Ljubljana", "to": "Zagreb", "dep": "08:00", "arr": "09:40", "type": "IC" },
  { "from": "Ljubljana", "to": "Venice", "dep": "09:00", "arr": "12:45", "type": "EC" },
  
  { "from": "Zagreb", "to": "Belgrade", "dep": "09:00", "arr": "13:30", "type": "IC" },
  { "from": "Zagreb", "to": "Budapest", "dep": "10:00", "arr": "13:30", "type": "IC" },
  
  // ==================== BALKANS ====================
  { "from": "Belgrade", "to": "Sofia", "dep": "09:00", "arr": "15:00", "type": "IC" },
  { "from": "Belgrade", "to": "Budapest", "dep": "10:00", "arr": "15:30", "type": "IC" },
  { "from": "Belgrade", "to": "Sarajevo", "dep": "08:00", "arr": "13:30", "type": "Regional" },
  { "from": "Belgrade", "to": "Zagreb", "dep": "10:00", "arr": "14:30", "type": "IC" },
  
  { "from": "Sarajevo", "to": "Zagreb", "dep": "08:00", "arr": "14:00", "type": "Regional" },
  { "from": "Sarajevo", "to": "Podgorica", "dep": "10:00", "arr": "18:00", "type": "Regional" },
  
  { "from": "Podgorica", "to": "Belgrade", "dep": "20:00", "arr": "07:00", "type": "Night train" },
  { "from": "Podgorica", "to": "Sarajevo", "dep": "08:00", "arr": "16:00", "type": "Regional" },
  
  { "from": "Tirana", "to": "Podgorica", "dep": "08:00", "arr": "13:00", "type": "Bus/train" },
  
  { "from": "Skopje", "to": "Thessaloniki", "dep": "09:00", "arr": "12:00", "type": "Regional" },
  { "from": "Skopje", "to": "Belgrade", "dep": "08:00", "arr": "15:00", "type": "Regional" },
  { "from": "Skopje", "to": "Sofia", "dep": "10:00", "arr": "14:00", "type": "Regional" },
  
  // ==================== BULGARIA & ROMANIA ====================
  { "from": "Sofia", "to": "Bucharest", "dep": "08:00", "arr": "14:30", "type": "IC" },
  { "from": "Sofia", "to": "Belgrade", "dep": "09:00", "arr": "15:00", "type": "IC" },
  { "from": "Sofia", "to": "Thessaloniki", "dep": "10:00", "arr": "15:30", "type": "IC" },
  { "from": "Sofia", "to": "Istanbul", "dep": "20:00", "arr": "08:00", "type": "Night train" },
  
  { "from": "Bucharest", "to": "Budapest", "dep": "19:00", "arr": "09:00", "type": "Night train" },
  { "from": "Bucharest", "to": "Chisinau", "dep": "09:00", "arr": "16:00", "type": "Regional" },
  { "from": "Bucharest", "to": "Istanbul", "dep": "20:00", "arr": "12:00", "type": "Night train" },
  
  // ==================== MOLDOVA & UKRAINE ====================
  { "from": "Chisinau", "to": "Bucharest", "dep": "08:00", "arr": "15:00", "type": "Regional" },
  { "from": "Chisinau", "to": "Kyiv", "dep": "09:00", "arr": "19:00", "type": "Intercity" },
  
  { "from": "Kyiv", "to": "Warsaw", "dep": "08:00", "arr": "16:00", "type": "Intercity" },
  { "from": "Kyiv", "to": "Minsk", "dep": "09:00", "arr": "16:00", "type": "Intercity" },
  { "from": "Kyiv", "to": "Bucharest", "dep": "20:00", "arr": "14:00", "type": "Night train" },
  
  // ==================== BELARUS & POLAND ====================
  { "from": "Minsk", "to": "Warsaw", "dep": "20:00", "arr": "08:00", "type": "Night train" },
  { "from": "Minsk", "to": "Vilnius", "dep": "08:00", "arr": "12:30", "type": "Regional" },
  { "from": "Minsk", "to": "Kyiv", "dep": "09:00", "arr": "16:00", "type": "Intercity" },
  
  { "from": "Warsaw", "to": "Krakow", "dep": "08:00", "arr": "10:20", "type": "EIP" },
  { "from": "Warsaw", "to": "Berlin", "dep": "09:00", "arr": "12:45", "type": "EC" },
  { "from": "Warsaw", "to": "Prague", "dep": "10:00", "arr": "15:30", "type": "EC" },
  { "from": "Warsaw", "to": "Vilnius", "dep": "08:30", "arr": "14:30", "type": "TLK" },
  
  // ==================== BALTICS ====================
  { "from": "Vilnius", "to": "Riga", "dep": "09:00", "arr": "13:30", "type": "Regional" },
  { "from": "Vilnius", "to": "Warsaw", "dep": "08:00", "arr": "14:30", "type": "TLK" },
  
  { "from": "Riga", "to": "Tallinn", "dep": "08:00", "arr": "11:30", "type": "Regional" },
  { "from": "Riga", "to": "Vilnius", "dep": "09:00", "arr": "13:30", "type": "Regional" },
  
  { "from": "Tallinn", "to": "Helsinki", "dep": "08:00", "arr": "10:30", "type": "Ferry" },
  { "from": "Tallinn", "to": "Riga", "dep": "09:00", "arr": "12:30", "type": "Regional" },
  
  // ==================== SCANDINAVIA ====================
  { "from": "Copenhagen", "to": "Hamburg", "dep": "08:00", "arr": "10:45", "type": "ICE/EC" },
  { "from": "Copenhagen", "to": "Stockholm", "dep": "09:00", "arr": "13:45", "type": "X2000/SJ" },
  { "from": "Copenhagen", "to": "Oslo", "dep": "10:00", "arr": "15:15", "type": "Regional" },
  { "from": "Copenhagen", "to": "Berlin", "dep": "11:00", "arr": "15:45", "type": "EC" },
  
  { "from": "Stockholm", "to": "Oslo", "dep": "08:00", "arr": "12:30", "type": "SJ" },
  { "from": "Stockholm", "to": "Copenhagen", "dep": "10:00", "arr": "14:45", "type": "SJ" },
  { "from": "Stockholm", "to": "Helsinki", "dep": "17:30", "arr": "08:00", "type": "Night ferry" },
  
  { "from": "Oslo", "to": "Stockholm", "dep": "08:30", "arr": "13:00", "type": "SJ" },
  { "from": "Oslo", "to": "Copenhagen", "dep": "09:30", "arr": "15:00", "type": "Regional" },
  
  { "from": "Helsinki", "to": "Stockholm", "dep": "17:30", "arr": "08:00", "type": "Night ferry" },
  
  // ==================== GREECE ====================
  { "from": "Athens", "to": "Thessaloniki", "dep": "08:00", "arr": "12:30", "type": "IC" },
  { "from": "Athens", "to": "Thessaloniki", "dep": "10:00", "arr": "14:30", "type": "IC" },
  { "from": "Athens", "to": "Sofia", "dep": "20:00", "arr": "10:00", "type": "Night train" },
  { "from": "Athens", "to": "Istanbul", "dep": "20:00", "arr": "13:00", "type": "Night train" },
  
  { "from": "Thessaloniki", "to": "Sofia", "dep": "08:00", "arr": "13:30", "type": "IC" },
  { "from": "Thessaloniki", "to": "Athens", "dep": "09:00", "arr": "13:30", "type": "IC" },
  { "from": "Thessaloniki", "to": "Skopje", "dep": "10:00", "arr": "13:00", "type": "Regional" },
  
  // ==================== TURKEY ====================
  { "from": "Istanbul", "to": "Sofia", "dep": "20:00", "arr": "08:00", "type": "Night train" },
  { "from": "Istanbul", "to": "Bucharest", "dep": "21:00", "arr": "13:00", "type": "Night train" },
  { "from": "Istanbul", "to": "Athens", "dep": "20:00", "arr": "13:00", "type": "Night train" },
  
  // ==================== IBERIAN PENINSULA ====================
  { "from": "Madrid", "to": "Barcelona", "dep": "08:30", "arr": "11:20", "type": "AVE" },
  { "from": "Madrid", "to": "Lisbon", "dep": "09:30", "arr": "13:15", "type": "Alvia" },
  { "from": "Madrid", "to": "Paris", "dep": "17:00", "arr": "22:30", "type": "Night train" },
  
  { "from": "Barcelona", "to": "Marseille", "dep": "08:00", "arr": "11:45", "type": "TGV" },
  { "from": "Barcelona", "to": "Madrid", "dep": "14:00", "arr": "16:50", "type": "AVE" },
  { "from": "Barcelona", "to": "Paris", "dep": "09:00", "arr": "16:30", "type": "TGV" },
  
  { "from": "Lisbon", "to": "Madrid", "dep": "09:00", "arr": "13:30", "type": "Lusitania" },
];
// ==================== COUNTRY DATA ====================
// Add this AFTER your connections array, BEFORE the buildGraph function

const countryData = {
  'United Kingdom': {
    flag: 'ðŸ‡¬ðŸ‡§',
    capital: 'London',
    image: 'images/london.jpg',
    description: 'The United Kingdom is known for its rich history, royal heritage, and world-class cultural attractions like the British Museum and Buckingham Palace.',
    facts: [
      { label: 'Population', value: '67 million' },
      { label: 'Currency', value: 'Pound (Â£)' },
      { label: 'Language', value: 'English' },
      { label: 'Rail Network', value: '16,000 km' }
    ]
  },
  'Ireland': {
    flag: 'ðŸ‡®ðŸ‡ª',
    capital: 'Dublin',
    image: 'images/dublin.jpg',
    description: 'Ireland, the Emerald Isle, is famous for its stunning landscapes, vibrant culture, friendly people, and rich literary heritage.',
    facts: [
      { label: 'Population', value: '5 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Irish, English' },
      { label: 'Rail Network', value: '2,400 km' }
    ]
  },
  'Portugal': {
    flag: 'ðŸ‡µðŸ‡¹',
    capital: 'Lisbon',
    image: 'images/lisbon.jpg',
    description: 'Portugal, the westernmost European country, is famous for its port wine, beautiful beaches, historic cities, and fado music.',
    facts: [
      { label: 'Population', value: '10 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Portuguese' },
      { label: 'Rail Network', value: '2,800 km' }
    ]
  },
  'Spain': {
    flag: 'ðŸ‡ªðŸ‡¸',
    capital: 'Madrid',
    image: 'images/madrid.jpg',
    description: 'Spain is known for its passionate culture, beautiful beaches, vibrant cities, and world-renowned cuisine like paella and tapas.',
    facts: [
      { label: 'Population', value: '47 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Spanish' },
      { label: 'Rail Network', value: '15,000 km' }
    ]
  },
  'France': {
    flag: 'ðŸ‡«ðŸ‡·',
    capital: 'Paris',
    image: 'images/paris.jfif',
    description: 'France is renowned for its art, fashion, cuisine, and architecture. Home to the Louvre, Eiffel Tower, and world-class wine regions.',
    facts: [
      { label: 'Population', value: '67 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'French' },
      { label: 'Rail Network', value: '29,000 km' }
    ]
  },
  'Belgium': {
    flag: 'ðŸ‡§ðŸ‡ª',
    capital: 'Brussels',
    image: 'images/Brussels.jpg',
    description: 'Belgium is famous for its medieval towns, Renaissance architecture, and as the headquarters of the European Union and NATO.',
    facts: [
      { label: 'Population', value: '11.6 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Dutch, French, German' },
      { label: 'Rail Network', value: '3,600 km' }
    ]
  },
  'Netherlands': {
    flag: 'ðŸ‡³ðŸ‡±',
    capital: 'Amsterdam',
    image: 'images/amsterdam.jpg',
    description: 'The Netherlands is known for its flat landscape, extensive canal system, windmills, tulip fields, and cycling routes.',
    facts: [
      { label: 'Population', value: '17.5 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Dutch' },
      { label: 'Rail Network', value: '3,000 km' }
    ]
  },
  'Germany': {
    flag: 'ðŸ‡©ðŸ‡ª',
    capital: 'Berlin',
    image: 'images/berlin.jpg',
    description: 'Germany is Europe\'s largest economy, known for its engineering excellence, rich history, beautiful castles, and beer culture.',
    facts: [
      { label: 'Population', value: '83 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'German' },
      { label: 'Rail Network', value: '38,500 km' }
    ]
  },
  'Luxembourg': {
    flag: 'ðŸ‡±ðŸ‡º',
    capital: 'Luxembourg',
    image: 'images/luxembourg.jpg',
    description: 'Luxembourg is one of the smallest countries in Europe, known for its banking sector, medieval old town, and as a founding EU member.',
    facts: [
      { label: 'Population', value: '645,000' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Luxembourgish, French, German' },
      { label: 'Rail Network', value: '275 km' }
    ]
  },
  'Switzerland': {
    flag: 'ðŸ‡¨ðŸ‡­',
    capital: 'Bern',
    image: 'images/bern.jpg',
    description: 'Switzerland is famous for its Alpine scenery, precision timepieces, delicious chocolate, and efficient rail network.',
    facts: [
      { label: 'Population', value: '8.7 million' },
      { label: 'Currency', value: 'Swiss Franc' },
      { label: 'Language', value: 'German, French, Italian, Romansh' },
      { label: 'Rail Network', value: '5,200 km' }
    ]
  },
  'Austria': {
    flag: 'ðŸ‡¦ðŸ‡¹',
    capital: 'Vienna',
    image: 'images/Vienna.jfif',
    description: 'Austria is known for its Alpine landscapes, classical music heritage (Mozart, Beethoven), and historic cities.',
    facts: [
      { label: 'Population', value: '9 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'German' },
      { label: 'Rail Network', value: '5,800 km' }
    ]
  },
  'Italy': {
    flag: 'ðŸ‡®ðŸ‡¹',
    capital: 'Rome',
    image: 'images/rome.jfif',
    description: 'Italy, the birthplace of the Renaissance, is famous for its art, architecture, cuisine, fashion, and stunning coastline.',
    facts: [
      { label: 'Population', value: '59 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Italian' },
      { label: 'Rail Network', value: '16,700 km' }
    ]
  },
  'Czech Republic': {
    flag: 'ðŸ‡¨ðŸ‡¿',
    capital: 'Prague',
    image: 'images/prague.jpg',
    description: 'The Czech Republic is known for its stunning castles, historic towns, world-famous beer, and being the home of Bohemian crystal.',
    facts: [
      { label: 'Population', value: '10.7 million' },
      { label: 'Currency', value: 'Czech Koruna' },
      { label: 'Language', value: 'Czech' },
      { label: 'Rail Network', value: '9,500 km' }
    ]
  },
  'Slovakia': {
    flag: 'ðŸ‡¸ðŸ‡°',
    capital: 'Bratislava',
    image: 'images/bratislava.jpg',
    description: 'Slovakia is known for its dramatic natural landscapes, numerous castles, and rich folk traditions.',
    facts: [
      { label: 'Population', value: '5.5 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Slovak' },
      { label: 'Rail Network', value: '3,600 km' }
    ]
  },
  'Hungary': {
    flag: 'ðŸ‡­ðŸ‡º',
    capital: 'Budapest',
    image: 'images/budapest.jpg',
    description: 'Hungary is famous for its thermal baths, paprika spice, and beautiful capital Budapest straddling the Danube River.',
    facts: [
      { label: 'Population', value: '9.7 million' },
      { label: 'Currency', value: 'Hungarian Forint' },
      { label: 'Language', value: 'Hungarian' },
      { label: 'Rail Network', value: '7,800 km' }
    ]
  },
  'Slovenia': {
    flag: 'ðŸ‡¸ðŸ‡®',
    capital: 'Ljubljana',
    image: 'images/ljubljana.jfif',
    description: 'Slovenia is known for its mountains, ski resorts, and lakes, including Lake Bled with its island church.',
    facts: [
      { label: 'Population', value: '2.1 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Slovene' },
      { label: 'Rail Network', value: '1,200 km' }
    ]
  },
  'Croatia': {
    flag: 'ðŸ‡­ðŸ‡·',
    capital: 'Zagreb',
    image: 'images/zagreb.jpg',
    description: 'Croatia is famous for its stunning Adriatic coastline with over 1,000 islands, medieval cities, and beautiful national parks.',
    facts: [
      { label: 'Population', value: '3.9 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Croatian' },
      { label: 'Rail Network', value: '2,600 km' }
    ]
  },
  'Bosnia & Herzegovina': {
    flag: 'ðŸ‡§ðŸ‡¦',
    capital: 'Sarajevo',
    image: 'images/sarajevo.jfif',
    description: 'Bosnia and Herzegovina is known for its beautiful countryside, medieval villages, and historic bridges like the Stari Most.',
    facts: [
      { label: 'Population', value: '3.3 million' },
      { label: 'Currency', value: 'Convertible Mark' },
      { label: 'Language', value: 'Bosnian, Croatian, Serbian' },
      { label: 'Rail Network', value: '1,000 km' }
    ]
  },
  'Serbia': {
    flag: 'ðŸ‡·ðŸ‡¸',
    capital: 'Belgrade',
    image: 'images/belgrade.jpg',
    description: 'Serbia is known for its vibrant nightlife, historic fortresses, and being at the crossroads of Central and Southeast Europe.',
    facts: [
      { label: 'Population', value: '6.7 million' },
      { label: 'Currency', value: 'Serbian Dinar' },
      { label: 'Language', value: 'Serbian' },
      { label: 'Rail Network', value: '3,800 km' }
    ]
  },
  'Montenegro': {
    flag: 'ðŸ‡²ðŸ‡ª',
    capital: 'Podgorica',
    image: 'images/podgorica.jpg',
    description: 'Montenegro is known for its dramatic mountains, medieval villages, and narrow beaches along its Adriatic coastline.',
    facts: [
      { label: 'Population', value: '620,000' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Montenegrin' },
      { label: 'Rail Network', value: '250 km' }
    ]
  },
  'Albania': {
    flag: 'ðŸ‡¦ðŸ‡±',
    capital: 'Tirana',
    image: 'images/tirana.jpg',
    description: 'Albania is known for its rugged mountains, Ottoman-era architecture, and beautiful beaches along the Ionian and Adriatic seas.',
    facts: [
      { label: 'Population', value: '2.8 million' },
      { label: 'Currency', value: 'Albanian Lek' },
      { label: 'Language', value: 'Albanian' },
      { label: 'Rail Network', value: '677 km' }
    ]
  },
  'North Macedonia': {
    flag: 'ðŸ‡²ðŸ‡°',
    capital: 'Skopje',
    image: 'images/skopje.jpg',
    description: 'North Macedonia is known for its ancient history, Orthodox churches, Ottoman heritage, and beautiful Lake Ohrid.',
    facts: [
      { label: 'Population', value: '2.1 million' },
      { label: 'Currency', value: 'Macedonian Denar' },
      { label: 'Language', value: 'Macedonian' },
      { label: 'Rail Network', value: '925 km' }
    ]
  },
  'Bulgaria': {
    flag: 'ðŸ‡§ðŸ‡¬',
    capital: 'Sofia',
    image: 'images/sofia.jpg',
    description: 'Bulgaria is known for its Black Sea coastline, mountainous interior, and traditional villages with rich folklore traditions.',
    facts: [
      { label: 'Population', value: '6.9 million' },
      { label: 'Currency', value: 'Bulgarian Lev' },
      { label: 'Language', value: 'Bulgarian' },
      { label: 'Rail Network', value: '4,000 km' }
    ]
  },
  'Romania': {
    flag: 'ðŸ‡·ðŸ‡´',
    capital: 'Bucharest',
    image: 'images/bucharest.jfif',
    description: 'Romania is famous for its medieval towns, Carpathian Mountains, and the legend of Dracula in Transylvania.',
    facts: [
      { label: 'Population', value: '19 million' },
      { label: 'Currency', value: 'Romanian Leu' },
      { label: 'Language', value: 'Romanian' },
      { label: 'Rail Network', value: '10,700 km' }
    ]
  },
  'Moldova': {
    flag: 'ðŸ‡²ðŸ‡©',
    capital: 'Chisinau',
    image: 'images/chisinau.jfif',
    description: 'Moldova is known for its wine culture, Soviet-era architecture, and being one of Europe\'s least visited countries.',
    facts: [
      { label: 'Population', value: '2.6 million' },
      { label: 'Currency', value: 'Moldovan Leu' },
      { label: 'Language', value: 'Romanian' },
      { label: 'Rail Network', value: '1,200 km' }
    ]
  },
  'Ukraine': {
    flag: 'ðŸ‡ºðŸ‡¦',
    capital: 'Kyiv',
    image: 'images/kyiv.jpg',
    description: 'Ukraine is Europe\'s largest country by area, known for its Orthodox churches, Black Sea coastline, and rich cultural heritage.',
    facts: [
      { label: 'Population', value: '41 million' },
      { label: 'Currency', value: 'Ukrainian Hryvnia' },
      { label: 'Language', value: 'Ukrainian' },
      { label: 'Rail Network', value: '21,600 km' }
    ]
  },
  'Belarus': {
    flag: 'ðŸ‡§ðŸ‡¾',
    capital: 'Minsk',
    image: 'images/minsk.jfif',
    description: 'Belarus is known for its Stalinist architecture, primeval forests, and being called "the lungs of Europe" for its greenery.',
    facts: [
      { label: 'Population', value: '9.4 million' },
      { label: 'Currency', value: 'Belarusian Ruble' },
      { label: 'Language', value: 'Belarusian, Russian' },
      { label: 'Rail Network', value: '5,500 km' }
    ]
  },
  'Poland': {
    flag: 'ðŸ‡µðŸ‡±',
    capital: 'Warsaw',
    image: 'images/warsaw.jfif',
    description: 'Poland is known for its medieval architecture, Jewish heritage, hearty cuisine, and tragic WWII history.',
    facts: [
      { label: 'Population', value: '38 million' },
      { label: 'Currency', value: 'Polish ZÅ‚oty' },
      { label: 'Language', value: 'Polish' },
      { label: 'Rail Network', value: '19,000 km' }
    ]
  },
  'Lithuania': {
    flag: 'ðŸ‡±ðŸ‡¹',
    capital: 'Vilnius',
    image: 'images/vilnius.jfif',
    description: 'Lithuania is known for its Baroque architecture, medieval castles, and being the geographical center of Europe.',
    facts: [
      { label: 'Population', value: '2.8 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Lithuanian' },
      { label: 'Rail Network', value: '1,900 km' }
    ]
  },
  'Latvia': {
    flag: 'ðŸ‡±ðŸ‡»',
    capital: 'Riga',
    image: 'images/riga.jfif',
    description: 'Latvia is known for its Art Nouveau architecture, vast forests, beautiful Baltic Sea coastline, and medieval old towns.',
    facts: [
      { label: 'Population', value: '1.9 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Latvian' },
      { label: 'Rail Network', value: '1,860 km' }
    ]
  },
  'Estonia': {
    flag: 'ðŸ‡ªðŸ‡ª',
    capital: 'Tallinn',
    image: 'images/tallinn.jfif',
    description: 'Estonia is known for its digital society, medieval old towns, dense forests, and being one of Europe\'s most digitally advanced countries.',
    facts: [
      { label: 'Population', value: '1.3 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Estonian' },
      { label: 'Rail Network', value: '900 km' }
    ]
  },
  'Finland': {
    flag: 'ðŸ‡«ðŸ‡®',
    capital: 'Helsinki',
    image: 'images/helsinki.jpg',
    description: 'Finland is known as the "Land of a Thousand Lakes," famous for its sauna culture, Northern Lights, and design heritage.',
    facts: [
      { label: 'Population', value: '5.5 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Finnish, Swedish' },
      { label: 'Rail Network', value: '5,900 km' }
    ]
  },
  'Sweden': {
    flag: 'ðŸ‡¸ðŸ‡ª',
    capital: 'Stockholm',
    image: 'images/stockholm.jfif',
    description: 'Sweden is known for its forests, lakes, innovative design, Viking history, and the Nobel Prize.',
    facts: [
      { label: 'Population', value: '10.4 million' },
      { label: 'Currency', value: 'Swedish Krona' },
      { label: 'Language', value: 'Swedish' },
      { label: 'Rail Network', value: '11,000 km' }
    ]
  },
  'Norway': {
    flag: 'ðŸ‡³ðŸ‡´',
    capital: 'Oslo',
    image: 'images/oslo.jfif',
    description: 'Norway is famous for its dramatic fjords, midnight sun, Northern Lights, and being one of the world\'s happiest countries.',
    facts: [
      { label: 'Population', value: '5.4 million' },
      { label: 'Currency', value: 'Norwegian Krone' },
      { label: 'Language', value: 'Norwegian' },
      { label: 'Rail Network', value: '4,200 km' }
    ]
  },
  'Denmark': {
    flag: 'ðŸ‡©ðŸ‡°',
    capital: 'Copenhagen',
    image: 'images/copenhagen.jpg',
    description: 'Denmark is known for its hygge lifestyle, Viking history, modern design, and being consistently ranked as one of the world\'s happiest countries.',
    facts: [
      { label: 'Population', value: '5.9 million' },
      { label: 'Currency', value: 'Danish Krone' },
      { label: 'Language', value: 'Danish' },
      { label: 'Rail Network', value: '2,600 km' }
    ]
  },
  'Greece': {
    flag: 'ðŸ‡¬ðŸ‡·',
    capital: 'Athens',
    image: 'images/Athens.jfif',
    description: 'Greece, the cradle of Western civilization, is famous for its ancient ruins, beautiful islands, and Mediterranean cuisine.',
    facts: [
      { label: 'Population', value: '10.7 million' },
      { label: 'Currency', value: 'Euro (â‚¬)' },
      { label: 'Language', value: 'Greek' },
      { label: 'Rail Network', value: '2,200 km' }
    ]
  },
  'Turkey': {
    flag: 'ðŸ‡¹ðŸ‡·',
    capital: 'Ankara',
    image: 'images/Ankara.jfif',
    description: 'Turkey straddles Europe and Asia, known for its rich history, diverse culture, and historic sites like Hagia Sophia.',
    facts: [
      { label: 'Population', value: '84 million' },
      { label: 'Currency', value: 'Turkish Lira' },
      { label: 'Language', value: 'Turkish' },
      { label: 'Rail Network', value: '12,000 km' }
    ]
  }
};

// ==================== CITY TO COUNTRY MAPPING ====================
const cityToCountry = {
  // United Kingdom
  'London': 'United Kingdom',
  'Edinburgh': 'United Kingdom',
  
  // Ireland
  'Dublin': 'Ireland',
  
  // Portugal
  'Lisbon': 'Portugal',
  
  // Spain
  'Madrid': 'Spain',
  'Barcelona': 'Spain',
  'Valencia': 'Spain',
  
  // France
  'Paris': 'France',
  'Marseille': 'France',
  'Lyon': 'France',
  
  // Belgium
  'Brussels': 'Belgium',
  
  // Netherlands
  'Amsterdam': 'Netherlands',
  
  // Germany
  'Berlin': 'Germany',
  'Frankfurt': 'Germany',
  'Munich': 'Germany',
  'Hamburg': 'Germany',
  'Cologne': 'Germany',
  'Hannover': 'Germany',
  
  // Luxembourg
  'Luxembourg': 'Luxembourg',
  
  // Switzerland
  'Zurich': 'Switzerland',
  'Geneva': 'Switzerland',
  
  // Austria
  'Vienna': 'Austria',
  'Salzburg': 'Austria',
  
  // Italy
  'Rome': 'Italy',
  'Milan': 'Italy',
  'Naples': 'Italy',
  'Venice': 'Italy',
  'Florence': 'Italy',
  
  // Czech Republic
  'Prague': 'Czech Republic',
  
  // Slovakia
  'Bratislava': 'Slovakia',
  
  // Hungary
  'Budapest': 'Hungary',
  
  // Slovenia
  'Ljubljana': 'Slovenia',
  
  // Croatia
  'Zagreb': 'Croatia',
  
  // Bosnia & Herzegovina
  'Sarajevo': 'Bosnia & Herzegovina',
  
  // Serbia
  'Belgrade': 'Serbia',
  
  // Montenegro
  'Podgorica': 'Montenegro',
  
  // Albania
  'Tirana': 'Albania',
  
  // North Macedonia
  'Skopje': 'North Macedonia',
  
  // Bulgaria
  'Sofia': 'Bulgaria',
  
  // Romania
  'Bucharest': 'Romania',
  
  // Moldova
  'Chisinau': 'Moldova',
  
  // Ukraine
  'Kyiv': 'Ukraine',
  
  // Belarus
  'Minsk': 'Belarus',
  
  // Poland
  'Warsaw': 'Poland',
  'Krakow': 'Poland',
  
  // Lithuania
  'Vilnius': 'Lithuania',
  
  // Latvia
  'Riga': 'Latvia',
  
  // Estonia
  'Tallinn': 'Estonia',
  
  // Finland
  'Helsinki': 'Finland',
  
  // Sweden
  'Stockholm': 'Sweden',
  'Gothenburg': 'Sweden',
  
  // Norway
  'Oslo': 'Norway',
  
  // Denmark
  'Copenhagen': 'Denmark',
  
  // Greece
  'Athens': 'Greece',
  'Thessaloniki': 'Greece',
  
  // Turkey
  'Istanbul': 'Turkey'
};

// ==================== COUNTRY INFO FUNCTIONS ====================
function showCountriesAlongRoute(startCity, endCity) {
  const route = findFastestRoute(startCity, endCity, 10);
  if (route.error) {
    alert('No route found between these cities');
    return;
  }
  
  // Get unique countries from route
  const countries = new Set();
  const trainTypes = new Set();
  let totalTime = 0;
  
  route.path.forEach(leg => {
    const fromCountry = cityToCountry[leg.from];
    const toCountry = cityToCountry[leg.to];
    if (fromCountry) countries.add(fromCountry);
    if (toCountry) countries.add(toCountry);
    
    // Extract train type
    if (leg.type) trainTypes.add(leg.type.split(' ')[0]);
    
    // Calculate time
    const depMin = toMinutes(leg.dep);
    const arrMin = toMinutes(leg.arr);
    if (depMin !== null && arrMin !== null) {
      const legTime = arrMin >= depMin ? arrMin - depMin : (arrMin + 1440) - depMin;
      totalTime += legTime;
    }
  });
  
  // Update stats
  document.getElementById('countries-count').textContent = countries.size;
  document.getElementById('route-distance').textContent = '~' + (countries.size * 350) + ' km';
  document.getElementById('travel-hours').textContent = Math.round(totalTime / 60) + 'h';
  
  // Display country cards
  const container = document.getElementById('country-cards');
  container.innerHTML = '';
  
  if (countries.size === 0) {
    container.innerHTML = '<div class="placeholder-card"><h3>No route found</h3><p>Try different cities.</p></div>';
    return;
  }
  
  Array.from(countries).forEach(countryName => {
    const country = countryData[countryName] || {
      flag: 'ðŸ³ï¸',
      capital: 'N/A',
      image: 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800&auto=format&fit=crop',
      description: 'Information about ' + countryName,
      facts: [
        { label: 'Population', value: 'N/A' },
        { label: 'Currency', value: 'N/A' },
        { label: 'Language', value: 'N/A' }
      ]
    };
    
    // Find route legs in this country
    const countryLegs = route.path.filter(leg => 
      cityToCountry[leg.from] === countryName || cityToCountry[leg.to] === countryName
    );
    
    const card = document.createElement('div');
    card.className = 'country-card';
    card.innerHTML = `
      <img src="${country.image}" alt="${countryName}" class="country-image">
      <div class="country-info">
        <div class="country-header">
          <h3 class="country-name">${countryName}</h3>
          <span class="country-flag">${country.flag}</span>
        </div>
        <div class="country-capital">Capital: ${country.capital}</div>
        <p class="country-description">${country.description}</p>
        
        <div class="country-facts">
          ${country.facts.map(fact => `
            <div class="fact">
              <span class="fact-label">${fact.label}:</span>
              <span class="fact-value">${fact.value}</span>
            </div>
          `).join('')}
        </div>
        
        ${countryLegs.length > 0 ? `
          <div class="train-info">
            <h4>Trains in ${countryName}:</h4>
            ${countryLegs.slice(0, 2).map(leg => `
              <div class="train-route">
                <span class="route-cities">${leg.from} â†’ ${leg.to}</span>
                <span class="train-time">${leg.dep} - ${leg.arr}</span>
              </div>
            `).join('')}
            ${countryLegs.length > 2 ? `<div style="color:#6b7280;font-size:13px;margin-top:5px;">+ ${countryLegs.length - 2} more connections</div>` : ''}
          </div>
        ` : ''}
      </div>
    `;
    
    container.appendChild(card);
  });
}

document.getElementById('show-countries').addEventListener('click', () => {
  const start = document.getElementById('journey-start').value.trim();
  const end = document.getElementById('journey-end').value.trim();
  
  if (!start || !end) {
    alert('Please enter both start and destination cities');
    return;
  }
  
  if (!graph[start] || !graph[end]) {
    alert('One or both cities not found in the network');
    return;
  }
  
  showCountriesAlongRoute(start, end);
});

// Sync with main search
document.getElementById('searchBtn').addEventListener('click', () => {
  setTimeout(() => {
    const start = document.getElementById('start').value;
    const end = document.getElementById('end').value;
    document.getElementById('journey-start').value = start;
    document.getElementById('journey-end').value = end;
    
    // Auto-show countries after search
    if (start && end) {
      setTimeout(() => showCountriesAlongRoute(start, end), 500);
    }
  }, 100);
});

// Initialize with example
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('journey-start').value = 'Paris';
    document.getElementById('journey-end').value = 'Barcelona';
    showCountriesAlongRoute('Paris', 'Barcelona');
  }, 1000);
});

// -----------------------------
// Build graph
// -----------------------------
function buildGraph(conns){
  const g = {};
  conns.forEach(c => {
    if(!g[c.from]) g[c.from]=[];
    g[c.from].push({to:c.to, dep:c.dep, arr:c.arr});
  });
  return g;
}
let graph = buildGraph(connections);

// Populate datalist
function populateStations(){
  const dl = document.getElementById('stations'); dl.innerHTML='';
  const stations = Object.keys(graph).concat(...Object.values(graph).flat().map(e=>e.to));
  const uniq = Array.from(new Set(stations)).sort();
  uniq.forEach(s => dl.appendChild(Object.assign(document.createElement('option'),{value:s})));
}
populateStations();

// -----------------------------
// Utilities
// -----------------------------
function toMinutes(t){ 
  if(!t) return null;
  const parts = t.split(':').map(Number);
  return parts[0]*60 + parts[1];
}
function minutesToHM(mins){ 
  if(mins===null) return ''; 
  const h=Math.floor(mins/60); const m=mins%60; 
  return (h? h+'h ':'') + (m? m+'m':'0m'); 
}
function requiresNewDay(prevArrivalMinutes, nextDepMinutes){
  if(prevArrivalMinutes === null) return true; 
  return nextDepMinutes < prevArrivalMinutes;
}

// -----------------------------
// Priority queue
// -----------------------------
class MinHeap {
  constructor(){ this.data = []; }
  push(item){ this.data.push(item); this._siftUp(); }
  pop(){ if(!this.data.length) return null; const top=this.data[0]; const last=this.data.pop(); if(this.data.length){ this.data[0]=last; this._siftDown(); } return top; }
  _siftUp(){ let i=this.data.length-1; while(i>0){ const p=Math.floor((i-1)/2); if(this._cmp(this.data[p],this.data[i])<=0) break; [this.data[p],this.data[i]]=[this.data[i],this.data[p]]; i=p; } }
  _siftDown(){ let i=0; const n=this.data.length; while(true){ let l=2*i+1, r=2*i+2, smallest=i; if(l<n && this._cmp(this.data[l],this.data[smallest])<0) smallest=l; if(r<n && this._cmp(this.data[r],this.data[smallest])<0) smallest=r; if(smallest===i) break; [this.data[i],this.data[smallest]]=[this.data[smallest],this.data[i]]; i=smallest; } }
  _cmp(a,b){ if(a.totalTime!==b.totalTime) return a.totalTime-b.totalTime; return a.days-b.days; }
  isEmpty(){ return this.data.length===0; }
}

// -----------------------------
// Route search
// -----------------------------
function findFastestRoute(start, end, maxDays=5){
  if(!graph[start]) return {error:'Start station not in schedule.'};
  const heap = new MinHeap();
  heap.push({city:start, arrival:null, days:0, totalTime:0, path:[]});
  const visited = {};

  while(!heap.isEmpty()){
    const state = heap.pop();
    const {city, arrival, days, totalTime, path} = state;
    if(city===end && days>0) return {path:path, time:totalTime, travelDays:days};

    visited[city] = visited[city] || {};
    if(visited[city][days]!==undefined && visited[city][days]<=totalTime) continue;
    visited[city][days]=totalTime;

    const edges = graph[city] || [];
    for(const e of edges){
      const depMin = toMinutes(e.dep), arrMin = toMinutes(e.arr);
      if(depMin===null||arrMin===null) continue;

      let newDays = days;
      if(requiresNewDay(arrival, depMin)) newDays=days+1;
      if(newDays>maxDays) continue;

      const addedTime = (arrMin-depMin>=0)?(arrMin-depMin):(arrMin+24*60-depMin);
      const newTotal = totalTime+addedTime;
      const newPath = path.concat([{from:city,to:e.to,dep:e.dep,arr:e.arr}]);
      heap.push({city:e.to, arrival:arrMin, days:newDays, totalTime:newTotal, path:newPath});
    }
  }

  return {error:'No valid route found within the given travel-day limit.'};
}

// -----------------------------
// Map coordinates
// -----------------------------

const coords = {
  // UNITED KINGDOM
  'London': [280, 220],
  'Edinburgh': [260, 170],
  
  // IRELAND
  'Dublin': [230, 210],
  
  // PORTUGAL
  'Lisbon': [180, 380],
  
  // SPAIN
  'Madrid': [230, 370],
  'Barcelona': [300, 360],
  
  // FRANCE
  'Paris': [320, 270],
  'Marseille': [360, 340],
  'Lyon': [350, 300],
  
  // BELGIUM
  'Brussels': [340, 240],
  
  // NETHERLANDS
  'Amsterdam': [340, 220],
  
  // GERMANY
  'Berlin': [420, 220],
  'Frankfurt': [360, 250],
  'Munich': [390, 280],
  'Hamburg': [380, 200],
  
  // LUXEMBOURG
  'Luxembourg': [350, 260],
  
  // SWITZERLAND
  'Zurich': [370, 290],
  'Geneva': [340, 300],
  
  // AUSTRIA
  'Vienna': [440, 270],
  'Salzburg': [400, 280],
  
  // ITALY
  'Rome': [410, 350],
  'Milan': [380, 310],
  'Naples': [430, 380],
  'Venice': [410, 300],
  
  // CZECH REPUBLIC
  'Prague': [410, 250],
  
  // SLOVAKIA
  'Bratislava': [430, 270],
  
  // HUNGARY
  'Budapest': [450, 280],
  
  // SLOVENIA
  'Ljubljana': [410, 300],
  
  // CROATIA
  'Zagreb': [420, 310],
  
  // BOSNIA & HERZEGOVINA
  'Sarajevo': [440, 320],
  
  // SERBIA
  'Belgrade': [450, 310],
  
  // MONTENEGRO
  'Podgorica': [440, 340],
  
  // ALBANIA
  'Tirana': [440, 350],
  
  // NORTH MACEDONIA
  'Skopje': [460, 340],
  
  // BULGARIA
  'Sofia': [470, 320],
  
  // ROMANIA
  'Bucharest': [490, 300],
  
  // MOLDOVA
  'Chisinau': [500, 290],
  
  // UKRAINE
  'Kyiv': [520, 250],
  
  // BELARUS
  'Minsk': [480, 230],
  
  // POLAND
  'Warsaw': [450, 240],
  'Krakow': [440, 260],
  
  // LITHUANIA
  'Vilnius': [470, 210],
  
  // LATVIA
  'Riga': [460, 190],
  
  // ESTONIA
  'Tallinn': [470, 170],
  
  // FINLAND
  'Helsinki': [490, 160],
  
  // SWEDEN
  'Stockholm': [440, 150],
  
  // NORWAY
  'Oslo': [400, 150],
  
  // DENMARK
  'Copenhagen': [390, 190],
  
  // GREECE
  'Athens': [470, 380],
  'Thessaloniki': [460, 350],
  
  // TURKEY (European part)
  'Istanbul': [520, 350],

};


// -----------------------------
// Map renderer (SVG)
// -----------------------------
function drawMap(routeNodes, showAll=false){
  const mapArea = document.getElementById('mapArea');
  mapArea.innerHTML='';
  const w = mapArea.clientWidth, h = mapArea.clientHeight;
  const svgNS = 'http://www.w3.org/2000/svg';
  const svg = document.createElementNS(svgNS,'svg');
  svg.setAttribute('width','100%'); 
  svg.setAttribute('height','100%'); 
  svg.setAttribute('viewBox',`0 0 ${w} ${h}`);

  const allCoords = Object.values(coords);
  const xs = allCoords.map(p=>p[0]), ys = allCoords.map(p=>p[1]);
  const minx=Math.min(...xs), maxx=Math.max(...xs), miny=Math.min(...ys), maxy=Math.max(...ys);
  const margin=20, scaleX=(w-2*margin)/(maxx-minx||1), scaleY=(h-2*margin)/(maxy-miny||1);
  function project(p){ return [(p[0]-minx)*scaleX+margin,(p[1]-miny)*scaleY+margin]; }

  // background lines
  Object.keys(graph).forEach(a=>{
    graph[a].forEach(e=>{
      const b=e.to;
      if(!coords[a]||!coords[b]) return;
      const pa=project(coords[a]), pb=project(coords[b]);
      const line=document.createElementNS(svgNS,'line');
      line.setAttribute('x1',pa[0]); line.setAttribute('y1',pa[1]);
      line.setAttribute('x2',pb[0]); line.setAttribute('y2',pb[1]);
      line.setAttribute('stroke','#e6eef6'); line.setAttribute('stroke-width','2');
      svg.appendChild(line);
    });
  });

  // highlight route
  if(routeNodes && routeNodes.length>1){
    for(let i=0;i<routeNodes.length-1;i++){
      const a=routeNodes[i], b=routeNodes[i+1]; 
      if(!coords[a]||!coords[b]) continue;
      const pa=project(coords[a]), pb=project(coords[b]);
      const line=document.createElementNS(svgNS,'line');
      line.setAttribute('x1',pa[0]); line.setAttribute('y1',pa[1]);
      line.setAttribute('x2',pb[0]); line.setAttribute('y2',pb[1]);
      line.setAttribute('stroke','#0b6efd'); line.setAttribute('stroke-width','4');
      svg.appendChild(line);
    }
  }

  // draw stations
  Object.keys(coords).forEach(st=>{
    if(!showAll && routeNodes && !routeNodes.includes(st)) return; // only show route nodes
    const p=project(coords[st]);
    const g=document.createElementNS(svgNS,'g');
    const circle=document.createElementNS(svgNS,'circle');
    circle.setAttribute('cx',p[0]); circle.setAttribute('cy',p[1]);
    circle.setAttribute('r',4); circle.setAttribute('fill','#fff'); 
    circle.setAttribute('stroke','#0b6efd'); circle.setAttribute('stroke-width',1);
    g.appendChild(circle);
    const text=document.createElementNS(svgNS,'text');
    text.setAttribute('x',p[0]+10); text.setAttribute('y',p[1]+6); 
    text.setAttribute('font-size','12'); text.setAttribute('fill','#0b1724');
    text.textContent = st;
    g.appendChild(text);
    svg.appendChild(g);
  });

  mapArea.appendChild(svg);
}

drawMap([], true);


// -----------------------------
// UI handlers
// -----------------------------
const startInput=document.getElementById('start');
const endInput=document.getElementById('end');
const maxDaysInput=document.getElementById('maxDays');
const searchBtn=document.getElementById('searchBtn');
const exampleBtn=document.getElementById('exampleBtn');
const resultDiv=document.getElementById('result');
const routeDetails=document.getElementById('routeDetails');

searchBtn.addEventListener('click', ()=>{
  const s=startInput.value.trim(), e=endInput.value.trim();
  const maxD=parseInt(maxDaysInput.value,10)||5;
  if(!s||!e){ resultDiv.innerHTML='<div style="color:#b91c1c;font-weight:700">Please enter start and destination stations.</div>'; return; }
  searchBtn.disabled=true; searchBtn.textContent='Searching...';
  setTimeout(()=>{
    const res=findFastestRoute(s,e,maxD);
    renderResult(res);
    searchBtn.disabled=false; searchBtn.textContent='Find fastest valid route';
  },10);
});

exampleBtn.addEventListener('click', ()=>{
  startInput.value='Paris'; endInput.value='Barcelona'; maxDaysInput.value='10';
  searchBtn.click();
});

function renderResult(res){
  resultDiv.innerHTML=''; routeDetails.textContent='';
  if(!res){ resultDiv.innerHTML='<div style="color:#b91c1c;font-weight:700">Internal error.</div>'; return; }
  if(res.error){ resultDiv.innerHTML='<div style="color:#b91c1c;font-weight:700">'+res.error+'</div>'; return; }

  const el=document.createElement('div');
  el.innerHTML=`<div style="font-weight:800;font-size:1.05rem">Fastest valid route</div>`;
  const meta=document.createElement('div'); meta.className='meta'; meta.style.marginTop='6px';
  meta.textContent=`Total in-train time: ${minutesToHM(res.time)} â€¢ Travel days used: ${res.travelDays}`;
  el.appendChild(meta);

  const list=document.createElement('div'); list.style.marginTop='12px';
  res.path.forEach((step,i)=>{
    const stepEl=document.createElement('div'); stepEl.className='route-step';
    stepEl.innerHTML=`<div style="font-weight:700">${i+1}.</div><div>${step.from} â†’ ${step.to}<br><span class="meta">${step.dep} â†’ ${step.arr}</span></div>`;
    list.appendChild(stepEl);
  });
  el.appendChild(list);
  resultDiv.appendChild(el);

  const routeStations=res.path.map(s=>s.from).concat([res.path[res.path.length-1].to]);
  drawMap(routeStations);
}

// Initial empty map
drawMap([]);
</script>
</body>
</html>
